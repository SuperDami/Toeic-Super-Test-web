<!DOCTYPE html>
<html>
	<head>
		<title>Toeic-Super-Test Manager List</title>
	</head>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
	<script type="text/javascript">
		function post_to_url(path, params, method) {
			console.log("params" + params);
		    method = method || "post"; // Set method to post by default if not specified.

		    // The rest of this code assumes you are not using a library.
		    // It can be made less wordy if you use one.
		    var form = document.createElement("form");
		    form.setAttribute("method", method);
		    form.setAttribute("action", path);

		    for(var key in params) {
		        if(params.hasOwnProperty(key)) {
		            var hiddenField = document.createElement("input");
		            hiddenField.setAttribute("type", "hidden");
		            hiddenField.setAttribute("name", key);
		            hiddenField.setAttribute("value", params[key]);

		            form.appendChild(hiddenField);
		         }
		    }

		    document.body.appendChild(form);
		    form.submit();
		}

		function goToPage(pageIndex) {
			window.location = "testList?page=" + pageIndex; 
		}
	</script>
	<style type="text/css">
		a {
			font-family: Helvetica;
		}
		table {
			border: none;
			font-family: Helvetica;
		}
    	th.capitalize {
    		text-transform:capitalize;
    	}
    	button.page {
    		border-width:1px;
    		font-size:12px; 
    		border-color:black; 
    	}
	</style>
	<body>
		<div id='container' style="width:100%;">
			<button style="background:#72AB12; border-width:1px; font-size:12px; border-color:black;" onclick="location.href='/addTest'">New test</button>
			<hr/>
			<table width="100%" cellspacing="0" cellpadding="5">
			  <tr>
			  <% for(var i = 0; i < columnName.length; i++) { %>
				  <th class="capitalize" align="center" style="width:<%= 80.0/columnName.length%>%">
				  	<%=columnName[i]%>
				  </th>
			  <% } %>
			  </tr>

			  <% for(var i = 0; i < testList.length; i++) { 
			  		var test = testList[i];
			  	%>
			  	<% if(i%2) {%>
			  		<tr style="background-color: white">
			  	<% } else {%>
			  		<tr style="background-color: #D7D7D7">
			  	<% } %>
				  <% for(var j = 0; j < columnName.length; j++) {
				  		var name = columnName[j];
				  		var value = test[name];
				  		%>

				  		<th align="center" class="cell">
				  		<% if(name === "testId"){ %>
				  			  <a href="/addTest?testId=<%=value%>"><%=value%></a>
				  		<% }
				  		   else {
				  		   	  %><%=value%><%
				  		   } %>
				        </th>
				  <% } %>
				  	<th>
				  	  <button style="background:#FF3807; border-width:1px; font-size:12px; border-color:black;" onclick="post_to_url('/deletePost', {testId: '<%=test['testId']%>'}, 'post')">delete</button>	
				  	</th>
				</tr>
			  <% } %>
			</table>
			<div style="width:100%; text-align:center; margin-top:20px">
	            <% if(prePage) { %>
		            <% var page = pageIndex - 1 %>
		            <button class="page" onclick="goToPage(<%=page%>)">
	            <% } else { %>
		            <button class="page" disabled>
	            <% } %>
	            <<<</button>

	            <a><%=pageIndex + 1%>/<%=pageCount%></a>

	            <% if(nextPage) { %>
		            <% var page = pageIndex + 1 %>
		            <button class="page" onclick="goToPage(<%=page%>)">
	            <% } else { %>
		            <button class="page" disabled>
	            <% } %>
	            >>></button>
			</div>
		</div>		
	</body>
</html>